<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dos Estados Federados(Art. 25 a 28)</title>
    <style>
        :root {
            --primary-bg: #f4f7f9;
            --secondary-bg: #ffffff;
            --text-color: #333;
            --primary-color: #005a9c;
            --correct-color: #28a745;
            --incorrect-color: #dc3545;
            --neutral-color: #6c757d;
            --border-color: #e0e0e0;
            --shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .quiz-container {
            background-color: var(--secondary-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 800px;
            padding: 30px;
            box-sizing: border-box;
        }
        .quiz-header {
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 20px;
        }
        .quiz-header h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 1.8em;
        }
        .quiz-header p {
            margin: 5px 0 0;
            color: var(--neutral-color);
        }
        #question-number {
            font-weight: bold;
            color: var(--primary-color);
        }
        #question-text {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 20px;
            text-align: justify;
            background-color: var(--primary-bg);
            padding: 15px;
            border-radius: 5px;
            border-left: 5px solid var(--primary-color);
        }
        .answer-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        .btn {
            flex-grow: 1;
            padding: 15px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid var(--border-color);
            border-radius: 5px;
            background-color: var(--secondary-bg);
            color: var(--primary-color);
            transition: all 0.2s ease-in-out;
        }
        .btn:hover:not(:disabled) {
            background-color: var(--primary-color);
            color: var(--secondary-bg);
            border-color: var(--primary-color);
        }
        .btn:disabled {
            cursor: not-allowed;
        }
        .btn.correct {
            background-color: var(--correct-color);
            color: white;
            border-color: var(--correct-color);
        }
        .btn.incorrect {
            background-color: var(--incorrect-color);
            color: white;
            border-color: var(--incorrect-color);
        }
        #feedback {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
            line-height: 1.5;
        }
        #feedback.correct-feedback {
            background-color: #e9f6ec;
            border-left: 5px solid var(--correct-color);
            color: #1e4620;
        }
        #feedback.incorrect-feedback {
            background-color: #fdecea;
            border-left: 5px solid var(--incorrect-color);
            color: #5c1a1a;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        #next-btn, #restart-btn, #prev-btn, #restart-wrong-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1em;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }
        #prev-btn {
            background-color: var(--neutral-color);
        }
        #prev-btn:hover {
            background-color: #5a6268;
        }
        #restart-wrong-btn {
            background-color: var(--incorrect-color);
            margin-left: 10px;
        }
        #restart-wrong-btn:hover {
            background-color: #c82333;
        }

        #results-container {
            text-align: center;
        }
        #results-container h2 {
            color: var(--primary-color);
        }
        #score {
            font-size: 1.5em;
            margin: 20px 0;
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <div class="quiz-header">
            <h1>Constituição Federal de 1988</h1>
            <p>Dos Estados Federados</p>
        </div>

        <div id="quiz-body">
            <p><span id="question-number"></span> de <span id="total-questions"></span></p>
            <div id="question-text"></div>
            <div class="answer-options">
                <button class="btn" id="btn-certo" onclick="selectAnswer('Certo')">Certo</button>
                <button class="btn" id="btn-errado" onclick="selectAnswer('Errado')">Errado</button>
            </div>
            <div id="feedback"></div>
            <div class="navigation">
                <button id="prev-btn" onclick="prevQuestion()">&larr; Anterior</button>
                <button id="next-btn" onclick="nextQuestion()">Próxima &rarr;</button>
            </div>
        </div>

        <div id="results-container" style="display: none;">
            <h2>Caderno Concluído!</h2>
            <p id="score"></p>
            <p id="score-message"></p>
            <button id="restart-btn" onclick="restartQuiz('all')">Refazer Todas</button>
            <button id="restart-wrong-btn" onclick="restartQuiz('wrong')">Refazer Erradas</button>
        </div>

    </div>

    <script>
        const quizData = [
            // Art. 25
            {
                question: "Os Estados organizam-se e regem-se pelas Constituições e leis que adotarem, observados os princípios da Constituição Federal.",
                answer: "Certo",
                rationale: "A assertiva está correta, pois reproduz fielmente o caput do Art. 25, que consagra a autonomia organizacional dos Estados-membros, condicionada, contudo, à observância dos princípios constitucionais federais."
            },
            {
                question: "A autonomia dos Estados para se organizarem e se regerem por suas próprias Constituições e leis é ilimitada.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. O caput do Art. 25, em sua parte final, estabelece um limite claro à autonomia estadual, determinando que devem ser \"observados os princípios desta Constituição\"."
            },
            {
                question: "São reservadas aos Estados as competências que não lhes sejam vedadas pela Constituição Federal.",
                answer: "Certo",
                rationale: "A questão está correta, pois é uma transcrição literal do Art. 25, § 1º, que estabelece a regra da competência residual (ou remanescente) dos Estados-membros."
            },
            {
                question: "Os Estados possuem apenas as competências que lhes são expressamente outorgadas pela Constituição Federal.",
                answer: "Errado",
                rationale: "A assertiva está incorreta, pois inverte a lógica da repartição de competências. O modelo adotado para os Estados é o da competência residual (Art. 25, § 1º), onde lhes cabe tudo o que não lhes for proibido. A técnica das competências enumeradas (expressas) é, em regra, aplicada à União."
            },
            {
                question: "Cabe aos Municípios explorar diretamente, ou mediante concessão, os serviços locais de gás canalizado.",
                answer: "Errado",
                rationale: "A assertiva está incorreta quanto ao ente federativo competente. O Art. 25, § 2º, atribui expressamente essa competência aos Estados."
            },
            {
                question: "A regulamentação dos serviços locais de gás canalizado, de competência dos Estados, pode ser feita por meio de medida provisória.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. A parte final do Art. 25, § 2º, veda expressamente \"a edição de medida provisória para a sua regulamentação\", exigindo que a matéria seja tratada por lei em sentido formal."
            },
            {
                question: "Os Estados podem instituir regiões metropolitanas, aglomerações urbanas e microrregiões por meio de lei ordinária.",
                answer: "Errado",
                rationale: "A assertiva está incorreta quanto à espécie normativa exigida. O Art. 25, § 3º, determina que a instituição dessas regiões se dará \"mediante lei complementar\", que possui um rito de aprovação mais rigoroso."
            },
            {
                question: "As regiões metropolitanas, aglomerações urbanas e microrregiões devem ser constituídas por agrupamentos de municípios limítrofes.",
                answer: "Certo",
                rationale: "A questão está correta e em conformidade com o Art. 25, § 3º, que estabelece a contiguidade territorial (\"municípios limítrofes\") como um requisito para a formação dessas unidades de planejamento regional."
            },
            {
                question: "A finalidade da instituição de regiões metropolitanas, aglomerações urbanas e microrregiões é integrar a organização, o planejamento e a execução de funções públicas de interesse comum.",
                answer: "Certo",
                rationale: "A assertiva está correta, pois descreve fielmente o objetivo dessas unidades regionais, conforme a parte final do Art. 25, § 3º, da Constituição."
            },
            {
                question: "A instituição de regiões metropolitanas é de competência da União, mediante lei complementar.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. O Art. 25, § 3º, atribui expressamente aos Estados a competência para, mediante lei complementar estadual, instituir as regiões metropolitanas."
            },
            // Art. 26
            {
                question: "O rol de bens dos Estados previsto no artigo 26 da Constituição Federal é exaustivo.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. A expressão \"Incluem-se entre\" indica que a lista de bens é exemplificativa (numerus apertus), podendo existir outros bens estaduais previstos em outras partes da Constituição ou na legislação."
            },
            {
                question: "Os bens listados no artigo 26 da Constituição Federal são de propriedade da União.",
                answer: "Errado",
                rationale: "A assertiva está incorreta, pois contradiz diretamente o comando do artigo, que se destina a listar os bens dos Estados-membros."
            },
            {
                question: "As águas superficiais e subterrâneas são bens dos Estados.",
                answer: "Errado",
                rationale: "A assertiva está incorreta por ser uma generalização indevida. O inciso I estabelece uma ressalva importante que foi omitida, tornando a afirmação incompleta e, portanto, falsa. As águas são, em regra, dos Estados, mas há exceções."
            },
            {
                question: "As águas superficiais ou subterrâneas, fluentes, emergentes e em depósito incluem-se entre os bens dos Estados.",
                answer: "Errado",
                rationale: "A assertiva está incorreta por omitir a ressalva final do dispositivo, que excepciona da propriedade estadual as águas em depósito decorrentes de obras da União."
            },
            {
                question: "As águas em depósito que sejam decorrentes de obras da União são ressalvadas da propriedade dos Estados, na forma da lei.",
                answer: "Certo",
                rationale: "A questão está correta, pois descreve fielmente a exceção à regra de dominialidade estadual sobre as águas, conforme a parte final do dispositivo (Art. 26, I)."
            },
            {
                question: "As áreas em ilhas oceânicas e costeiras que estiverem no domínio de um Estado incluem-se entre seus bens.",
                answer: "Errado",
                rationale: "A assertiva está incorreta por omitir as importantes exclusões que constam no dispositivo, tornando a regra excessivamente ampla (Art. 26, II)."
            },
            {
                question: "As áreas em ilhas oceânicas e costeiras que estiverem sob o domínio da União ou de Municípios não são consideradas bens dos Estados.",
                answer: "Certo",
                rationale: "A questão está correta, pois reflete as exceções à propriedade estadual sobre áreas em ilhas, conforme expressamente previsto no dispositivo (Art. 26, II)."
            },
            {
                question: "As áreas em ilhas costeiras que estiverem sob o domínio de terceiros são excluídas do rol de bens dos Estados.",
                answer: "Certo",
                rationale: "A assertiva está correta, pois menciona uma das três exclusões à dominialidade estadual sobre áreas em ilhas (Art. 26, II)."
            },
            {
                question: "Todas as ilhas fluviais e lacustres são bens dos Estados.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. A propriedade estadual sobre essas ilhas é residual, aplicando-se apenas àquelas que não forem de propriedade da União (Art. 26, III)."
            },
            {
                question: "As ilhas fluviais e lacustres que não pertencem à União incluem-se entre os bens dos Estados.",
                answer: "Certo",
                rationale: "A questão é uma transcrição literal e correta do dispositivo que define a propriedade estadual sobre essas ilhas (Art. 26, III)."
            },
            {
                question: "As ilhas fluviais e lacustres que não pertencem aos Municípios são bens dos Estados.",
                answer: "Errado",
                rationale: "A assertiva está incorreta ao trocar o ente federativo da ressalva. A exclusão da propriedade estadual refere-se às ilhas pertencentes à União, e não aos Municípios (Art. 26, III)."
            },
            {
                question: "Todas as terras devolutas situadas no território nacional são bens dos Estados.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. A propriedade estadual sobre as terras devolutas é subsidiária, abrangendo apenas aquelas que não são de propriedade da União (Art. 26, IV)."
            },
            {
                question: "As terras devolutas que não estão compreendidas entre as da União são bens dos Estados.",
                answer: "Certo",
                rationale: "A questão está correta, pois é uma transcrição literal da regra de dominialidade estadual sobre as terras devolutas (Art. 26, IV)."
            },
            {
                question: "As terras devolutas indispensáveis à defesa das fronteiras são bens dos Estados.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. Conforme o Art. 20, II, da Constituição, as terras devolutas indispensáveis à defesa das fronteiras são bens da União, sendo, portanto, uma das exceções à regra da propriedade estadual."
            },
            {
                question: "As terras devolutas situadas na faixa de fronteira são bens dos Estados.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. Conforme o Art. 20, II, da Constituição, as terras devolutas na faixa de fronteira são consideradas bens da União, excluindo-se, assim, da propriedade estadual."
            },
            // Art. 27
            {
                question: "O número de Deputados Estaduais em uma Assembleia Legislativa corresponderá sempre ao triplo da representação do respectivo Estado na Câmara dos Deputados.",
                answer: "Errado",
                rationale: "A assertiva está incorreta por ser incompleta. A regra do triplo, prevista no caput do Art. 27, aplica-se apenas até o limite de 36 Deputados Estaduais (correspondente a 12 Deputados Federais). A partir daí, a regra de cálculo muda."
            },
            {
                question: "Em um Estado que possui 15 Deputados Federais, o número de Deputados Estaduais será 39.",
                answer: "Certo",
                rationale: "A questão está correta. A regra do caput do Art. 27 estabelece que, atingido o número de 36 deputados (equivalente a 12 deputados federais), será acrescido de tantos quantos forem os deputados federais acima de 12. No caso, há 3 deputados federais acima de 12 (15 - 12 = 3). Portanto, o cálculo é 36 + 3 = 39."
            },
            {
                question: "Atingido o número de trinta e seis Deputados Estaduais, o número de parlamentares na Assembleia Legislativa será acrescido de tantos quantos forem os Deputados Federais acima de doze.",
                answer: "Certo",
                rationale: "A assertiva está correta, pois é uma transcrição literal da segunda parte da regra de cálculo para a composição das Assembleias Legislativas, conforme o caput do Art. 27."
            },
            {
                question: "O mandato dos Deputados Estaduais será de quatro anos.",
                answer: "Certo",
                rationale: "A questão está correta e em total conformidade com a primeira parte do Art. 27, § 1º, que fixa a duração da legislatura estadual."
            },
            {
                question: "Aos Deputados Estaduais aplicam-se as regras da Constituição Federal sobre sistema eleitoral, inviolabilidade e imunidades.",
                answer: "Certo",
                rationale: "A assertiva está correta. O Art. 27, § 1º, estende aos parlamentares estaduais o mesmo estatuto jurídico dos congressistas federais em diversas matérias, incluindo as citadas na questão."
            },
            {
                question: "Aplicam-se aos Deputados Estaduais as regras da Constituição sobre remuneração e perda de mandato, mas não as relativas a licença e impedimentos.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. O Art. 27, § 1º, é explícito ao aplicar aos Deputados Estaduais um conjunto amplo de regras, que inclui remuneração, perda de mandato, licença e impedimentos."
            },
            {
                question: "O subsídio dos Deputados Estaduais será fixado por lei de iniciativa do Governador do Estado.",
                answer: "Errado",
                rationale: "A assertiva está incorreta quanto à autoria da proposta. O Art. 27, § 2º, estabelece que o subsídio será fixado por lei de iniciativa da própria Assembleia Legislativa, em respeito à autonomia do Poder Legislativo."
            },
            {
                question: "O subsídio dos Deputados Estaduais será de, no máximo, setenta e cinco por cento daquele estabelecido para os Deputados Federais.",
                answer: "Certo",
                rationale: "A questão está correta, pois reproduz fielmente o teto remuneratório para os parlamentares estaduais, conforme previsto no Art. 27, § 2º."
            },
            {
                question: "O valor do subsídio de um Deputado Estadual deve ser fixado em exatamente setenta e cinco por cento do subsídio de um Deputado Federal.",
                answer: "Errado",
                rationale: "A assertiva está incorreta ao usar o termo \"exatamente\". O Art. 27, § 2º, estabelece um limite, ao dizer \"no máximo, setenta e cinco por cento\". Portanto, o valor pode ser fixado em qualquer percentual inferior a esse teto."
            },
            {
                question: "Compete às Assembleias Legislativas dispor sobre seu regimento interno.",
                answer: "Certo",
                rationale: "A questão está correta. A competência para elaborar o próprio regimento interno é uma prerrogativa de auto-organização do Poder Legislativo, expressamente garantida pelo Art. 27, § 3º."
            },
            {
                question: "A organização dos serviços administrativos da secretaria de uma Assembleia Legislativa é de competência do Poder Executivo estadual.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. O Art. 27, § 3º, em respeito à separação dos Poderes, atribui à própria Assembleia Legislativa a competência para dispor sobre \"serviços administrativos de sua secretaria, e prover os respectivos cargos\"."
            },
            {
                question: "É de competência das Assembleias Legislativas dispor sobre sua polícia e os serviços administrativos de sua secretaria, bem como prover os respectivos cargos.",
                answer: "Certo",
                rationale: "A assertiva está correta, pois é uma transcrição literal das competências de auto-administração conferidas às Assembleias Legislativas pelo Art. 27, § 3º."
            },
            {
                question: "A lei disporá sobre a iniciativa popular no processo legislativo estadual.",
                answer: "Certo",
                rationale: "A questão é uma transcrição literal e correta do Art. 27, § 4º. Trata-se de uma norma constitucional que impõe ao legislador estadual o dever de regulamentar esse instrumento de democracia participativa."
            },
            {
                question: "A Constituição do Estado é o instrumento normativo que deve dispor sobre a iniciativa popular no processo legislativo estadual.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. Embora a Constituição Estadual possa prever a iniciativa popular, o Art. 27, § 4º, estabelece que \"A lei disporá sobre\" a matéria, indicando que a regulamentação detalhada dos procedimentos e requisitos será feita por meio de lei em sentido formal."
            },
            {
                question: "A iniciativa popular não é admitida no processo legislativo estadual.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. O Art. 27, § 4º, não apenas admite como determina que a lei regulamente o exercício da iniciativa popular no âmbito estadual, tratando-se de um direito político do cidadão."
            },
            // Art. 28
            {
                question: "A eleição do Governador e do Vice-Governador de Estado ocorre para um mandato de quatro anos.",
                answer: "Certo",
                rationale: "A questão está correta e em conformidade com a primeira parte do caput do Art. 28, que estabelece a duração do mandato dos chefes do Poder Executivo estadual."
            },
            {
                question: "A eleição para Governador de Estado realizar-se-á no primeiro domingo de outubro, em primeiro turno, e no último domingo de novembro, em segundo turno, se houver.",
                answer: "Errado",
                rationale: "A assertiva está incorreta quanto ao mês do segundo turno. O caput do Art. 28 estabelece que o segundo turno, se necessário, ocorrerá no \"último domingo de outubro\", e não de novembro."
            },
            {
                question: "A posse do Governador e do Vice-Governador de Estado eleitos ocorrerá em 6 de janeiro do ano subsequente à eleição.",
                answer: "Certo",
                rationale: "A questão está correta, pois reproduz fielmente a data da posse estabelecida pelo caput do Art. 28 da Constituição."
            },
            {
                question: "As regras para a eleição do Governador e Vice-Governador de Estado observam, no que couber, o disposto no artigo 77 da Constituição Federal.",
                answer: "Certo",
                rationale: "A assertiva está correta. A parte final do caput do Art. 28 remete ao Art. 77, que trata da eleição do Presidente da República, aplicando-se, por simetria, as regras de maioria absoluta, segundo turno, entre outras, à eleição dos governadores."
            },
            {
                question: "Perderá o mandato o Governador que assumir outro cargo ou função na administração pública direta ou indireta.",
                answer: "Errado",
                rationale: "A assertiva está incorreta por ser incompleta. Ela apresenta a regra geral, mas omite a exceção prevista no Art. 28, § 1º, que ressalva a posse em virtude de concurso público. A omissão da exceção torna a regra absoluta e, portanto, falsa."
            },
            {
                question: "A posse em cargo público em virtude de aprovação em concurso público é uma ressalva à regra de perda do mandato pelo Governador.",
                answer: "Certo",
                rationale: "A questão está correta, pois descreve fielmente a exceção contida na parte final do Art. 28, § 1º, que permite ao Governador tomar posse em cargo de provimento efetivo sem que isso acarrete a perda do mandato eletivo."
            },
            {
                question: "O Governador que assumir qualquer outro cargo ou função na administração pública, mesmo que em virtude de concurso público, perderá o mandato.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. O Art. 28, § 1º, estabelece expressamente que a posse em virtude de concurso público é uma \"ressalva\" à regra geral de perda de mandato, não se aplicando, portanto, a sanção nesse caso."
            },
            {
                question: "Os subsídios do Governador, do Vice-Governador e dos Secretários de Estado serão fixados por lei de iniciativa do próprio Governador.",
                answer: "Errado",
                rationale: "A assertiva está incorreta quanto à autoria da proposição legislativa. O Art. 28, § 2º, atribui a competência para a iniciativa da lei que fixa os subsídios à Assembleia Legislativa, e não ao chefe do Poder Executivo."
            },
            {
                question: "Compete à Assembleia Legislativa a iniciativa da lei que fixa os subsídios do Governador, do Vice-Governador e dos Secretários de Estado.",
                answer: "Certo",
                rationale: "A questão está correta, pois descreve com exatidão a competência prevista no Art. 28, § 2º, da Constituição."
            },
            {
                question: "A lei de iniciativa da Assembleia Legislativa fixará os subsídios apenas do Governador e do Vice-Governador, não alcançando os Secretários de Estado.",
                answer: "Errado",
                rationale: "A assertiva está incorreta. O Art. 28, § 2º, inclui expressamente os \"Secretários de Estado\" no rol de autoridades cujos subsídios são fixados pela mesma lei de iniciativa do Poder Legislativo estadual."
            }
        ];


        const questionNumberEl = document.getElementById('question-number');
        const totalQuestionsEl = document.getElementById('total-questions');
        const questionTextEl = document.getElementById('question-text');
        const btnCerto = document.getElementById('btn-certo');
        const btnErrado = document.getElementById('btn-errado');
        const feedbackEl = document.getElementById('feedback');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const restartBtn = document.getElementById('restart-btn');
        const restartWrongBtn = document.getElementById('restart-wrong-btn');
        const quizBodyEl = document.getElementById('quiz-body');
        const resultsContainerEl = document.getElementById('results-container');
        const scoreEl = document.getElementById('score');
        const scoreMessageEl = document.getElementById('score-message');

        let currentQuestionIndex = 0;
        let score = 0;
        let wrongAnswersList = []; 
        let currentQuizData = [...quizData];

        function loadQuestion() {
            resetState();
            const currentQuestion = currentQuizData[currentQuestionIndex];
            questionNumberEl.innerText = currentQuestionIndex + 1;
            totalQuestionsEl.innerText = currentQuizData.length;
            questionTextEl.innerText = currentQuestion.question;

            if (currentQuestionIndex > 0) {
                prevBtn.style.display = 'inline-block';
            }
            
            nextBtn.style.display = 'inline-block';
        }

        function resetState() {
            feedbackEl.style.display = 'none';
            feedbackEl.className = '';
            nextBtn.style.display = 'none';
            prevBtn.style.display = 'none';

            btnCerto.disabled = false;
            btnErrado.disabled = false;
            btnCerto.className = 'btn';
            btnErrado.className = 'btn';
        }

        function selectAnswer(selectedAnswer) {
            btnCerto.disabled = true;
            btnErrado.disabled = true;

            const currentQuestion = currentQuizData[currentQuestionIndex];
            const isCorrect = selectedAnswer === currentQuestion.answer;

            if (isCorrect) {
                score++;
                feedbackEl.innerHTML = `<strong>Correto!</strong> ${currentQuestion.rationale}`;
                feedbackEl.className = 'correct-feedback';
            } else {
                feedbackEl.innerHTML = `<strong>Incorreto.</strong> ${currentQuestion.rationale}`;
                feedbackEl.className = 'incorrect-feedback';
                
                if (!wrongAnswersList.includes(currentQuestion)) {
                     wrongAnswersList.push(currentQuestion);
                }
            }
            
            if (currentQuestion.answer === 'Certo') {
                btnCerto.classList.add('correct');
                if (!isCorrect) btnErrado.classList.add('incorrect');
            } else {
                btnErrado.classList.add('correct');
                if (!isCorrect) btnCerto.classList.add('incorrect');
            }

            feedbackEl.style.display = 'block';
            nextBtn.style.display = 'inline-block';
            
            if (currentQuestionIndex > 0) {
                prevBtn.style.display = 'inline-block';
            }
        }

        function prevQuestion() {
            currentQuestionIndex--;
            loadQuestion();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentQuizData.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            quizBodyEl.style.display = 'none';
            resultsContainerEl.style.display = 'block';
            restartBtn.style.display = 'inline-block';
            
            if (wrongAnswersList.length > 0) {
                restartWrongBtn.style.display = 'inline-block';
            }
            
            const percentage = Math.round((score / currentQuizData.length) * 100);
            scoreEl.innerText = `Você acertou ${score} de ${currentQuizData.length} questões (${percentage}%).`;

            let message = '';
            if (percentage >= 90) {
                message = 'Excelente desempenho! Você domina o assunto.';
            } else if (percentage >= 70) {
                message = 'Ótimo resultado! Continue revisando os detalhes.';
            } else if (percentage >= 50) {
                message = 'Bom esforço. Foco nos pontos que errou para melhorar.';
            } else {
                message = 'Continue estudando. A repetição leva à perfeição.';
            }
            scoreMessageEl.innerText = message;
        }

        function restartQuiz(mode) {
            currentQuestionIndex = 0;
            score = 0;

            if (mode === 'wrong' && wrongAnswersList.length > 0) {
                currentQuizData = [...wrongAnswersList];
            } else {
                currentQuizData = [...quizData];
            }
            
            wrongAnswersList = [];
            
            resultsContainerEl.style.display = 'none';
            restartWrongBtn.style.display = 'none';
            quizBodyEl.style.display = 'block';
            loadQuestion();
        }

        loadQuestion();
    </script>

</body>
</html>